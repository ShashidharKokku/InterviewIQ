<!DOCTYPE html>
<html>
<head>
    <title>InterviewIQ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>InterviewIQ</h1>

    <form method="POST" enctype="multipart/form-data">

        <label>Mode</label>
        <select name="mode" id="mode" onchange="toggleInputs()">
            <option value="skill">Skill-Based</option>
            <option value="jd">JD-Based</option>
            <option value="resume">Resume-Based</option>
        </select>

        <label>Difficulty</label>
        <select name="level">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select>

        <div id="skillBox">
            <label>Skills</label><br>
            <input type="checkbox" name="skills" value="python"> Python<br>
            <input type="checkbox" name="skills" value="dbms"> DBMS<br>
            <input type="checkbox" name="skills" value="os"> OS<br>
            <input type="checkbox" name="skills" value="cn"> CN<br>
        </div>

        <div id="jdBox" style="display:none;">
            <textarea name="jd_input" rows="4"></textarea>
        </div>

        <div id="resumeBox" style="display:none;">
            <input type="file" name="resume_file">
        </div>

        <button type="submit">Generate Questions</button>
    </form>

    {% if grouped_questions %}
        <div class="result">
            <h3>Interview Questions ({{ level | capitalize }})</h3>

            {% for skill, questions in grouped_questions.items() %}
                <h4>{{ skill }}</h4>
                <ul class="qa-list">
                    {% for item in questions %}
                        <li class="qa-card">
                            <p class="question"><b>Q:</b> {{ item.q }}</p>
                            <p class="answer"><b>A:</b> {{ item.a }}</p>
                        </li>
                    {% endfor %}
                </ul>
            {% endfor %}
        </div>
    {% endif %}
</div>

<script>
function toggleInputs() {
    let mode = document.getElementById("mode").value;
    document.getElementById("skillBox").style.display = (mode === "skill") ? "block" : "none";
    document.getElementById("jdBox").style.display = (mode === "jd") ? "block" : "none";
    document.getElementById("resumeBox").style.display = (mode === "resume") ? "block" : "none";
}
</script>

</body>
</html>
